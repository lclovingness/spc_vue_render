webpackJsonp([1],{"+skl":function(t,e){},"4bFZ":function(t,e){Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var s in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[s]:("00"+e[s]).substr((""+e[s]).length)));return t},Array.prototype.in_array=function(t){for(i=0;i<this.length&&this[i]!=t;i++);return!(i==this.length)},String.prototype.myReplace=function(t,e){var s=new RegExp(t,"g");return this.replace(s,e)},String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")}},E4za:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),i=s("mvHQ"),n=s.n(i),r=s("XLwt"),l=s.n(r),o={name:"App",props:[],data:function(){return{ws:null,myChart:null,spcFeaturesArr:[],showAtTheSameTimeSpotNums:5,chartIndex:0,chartDateTimeArr:[],latestAllDataArr:[],latestAllCa:[],latestAllCp:[],latestAllCpk:[],user_all_usls:[],user_all_lsls:[],user_all_means:[],user_all_sigmas:[]}},watch:{},mounted:function(){var t="ws://"+window.location.host+"/",e="MozWebSocket"in window?MozWebSocket:WebSocket,s=this;this.ws=new e(t),this.ws.onerror=function(t){console.log(t)},this.ws.onmessage=function(t){s.updateReceivedData(t.data)},this.ws.onprob=function(){console.log("Socket connection probd")},this.ws.onopen=function(){console.log("Socked Connected OK"),s.execInitSendAction()},this.simulateInitData()},methods:{simulateInitData:function(){this.spcFeaturesArr=["wind_direction","generator_speed"],this.showAtTheSameTimeSpotNums=9,this.chartDateTimeArr=["12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00"],this.latestAllDataArr=[[5,30,50,45,60,20,55,33,105],[6,32,45,51,38,99,45,59,28]],this.latestAllCa=[11,12],this.latestAllCp=[13,20],this.latestAllCpk=[15,18],this.user_all_usls=[95,90],this.user_all_lsls=[5,11],this.user_all_means=[45,39],this.user_all_sigmas=[27,10],this.d("tempHinterLayer").style.display="none",setTimeout(this.readyForDrawSPCCharts,1e3)},readyForUpdateNumValue:function(){},sendBackAfterSomeParasChanged:function(t){var e={initcfg:0};e.num=this.showAtTheSameTimeSpotNums,e.idx=t,e.user_usl=this.user_all_usls[t],e.user_lsl=this.user_all_lsls[t],this.ws.send(n()(e))},execInitSendAction:function(){this.ws.send('{"initcfg":1}')},updateReceivedData:function(t){if(console.log("recvdata:",t),this.d("tempHinterLayer").style.display="none",t.indexOf("datetime")>-1){var e=JSON.parse(t);this.chartDateTimeArr.push(e.datetime),this.latestAllDataArr.push(e.data),this.latestAllCa=e.Ca.split(","),this.latestAllCp=e.Cp.split(","),this.latestAllCpk=e.Cpk.split(","),this.latestAllDataArr.length>this.showAtTheSameTimeSpotNums&&(this.chartDateTimeArr.shift(),this.latestAllDataArr.shift())}if(t.indexOf("FeatureList")>-1){var s=JSON.parse(t);this.showAtTheSameTimeSpotNums=Number(s.NUM),this.spcFeaturesArr=s.FeatureList.split(","),this.user_all_usls=s.USL.split(","),this.user_all_lsls=s.LSL.split(","),this.user_all_means=s.mean.split(","),this.user_all_sigmas=s.sigma.split(",")}this.readyForDrawSPCCharts()},readyForDrawSPCCharts:function(){for(var t=0;t<this.spcFeaturesArr.length;t++){var e=l.a.init(this.d("chart_"+t)),s=this.spcFeaturesArr[t];console.log("this.showAtTheSameTimeSpotNums="+this.showAtTheSameTimeSpotNums);var a=new Array(Number(this.showAtTheSameTimeSpotNums)).fill(this.user_all_usls[t]),i=new Array(Number(this.showAtTheSameTimeSpotNums)).fill(this.user_all_lsls[t]);console.log("lsl_markline_value="+i);var n=new Array(Number(this.showAtTheSameTimeSpotNums)).fill(this.user_all_means[t]),r=new Array(Number(this.showAtTheSameTimeSpotNums)).fill(this.user_all_means[t]+this.user_all_sigmas[t]),o=new Array(Number(this.showAtTheSameTimeSpotNums)).fill(this.user_all_means[t]-this.user_all_sigmas[t]),u=this.chartDateTimeArr,m=this.latestAllDataArr[t];e.setOption(this.getAimOptionForECharts(s,u,m,a,i,n,r,o),!0),this.d("chart_"+t).width=document.body.offsetWidth-320+"px"}},recombineMapArr:function(t){for(var e=[],s=0;s<this.latestAllDataArr.length;s++)e.push(this.latestAllDataArr[s][t]);return e},getAimOptionForECharts:function(t,e,s,a,i,n,r,l){return this.option={title:{text:""},tooltip:{trigger:"axis"},legend:{data:[t],symbol:"none"},animation:!1,color:["#FFA500","#7f7f7f","#7f7f7f","#7f7f7f","#7f7f7f","#7f7f7f"],xAxis:[{name:"",nameGap:10,boundaryGap:!1,data:e,axisLabel:{interval:"auto",showMinLabel:!0,showMaxLabel:!0,align:"center",inside:!1,textStyle:{color:"#000"}}}],yAxis:[{name:"",nameTextStyle:{width:"100%"},type:"value",splitLine:{show:!1}}],series:[{name:t,type:"line",symbol:"none",data:s},{name:"USL",type:"line",symbol:"none",data:a,markPoint:{symbol:"circle",symbolSize:1,symbolOffset:[790,0],label:{show:!0,color:"#000",fontSize:14,align:"left",padding:[0,0,0,15],formatter:"USL"},data:[{type:"max"}]}},{name:"LSL",type:"line",symbol:"none",data:i,markPoint:{symbol:"circle",symbolSize:1,symbolOffset:[790,0],label:{show:!0,color:"#000",fontSize:14,align:"left",padding:[0,0,0,15],formatter:"LSL"},data:[{type:"max"}]}},{name:"Mean+Sigma",type:"line",symbol:"none",data:r,markPoint:{symbol:"circle",symbolSize:1,symbolOffset:[790,0],label:{show:!0,color:"#000",fontSize:14,align:"left",padding:[0,0,0,15],formatter:"mean+3σ"},data:[{type:"max"}]}},{name:"Mean",type:"line",symbol:"none",data:n,markPoint:{symbol:"circle",symbolSize:1,symbolOffset:[790,0],label:{show:!0,color:"#000",fontSize:14,align:"left",padding:[0,0,0,15],formatter:"mean"},data:[{type:"max"}]}},{name:"Mean-Sigma",type:"line",symbol:"none",data:l,markPoint:{symbol:"circle",symbolSize:1,symbolOffset:[790,0],label:{show:!0,color:"#000",fontSize:14,fontFamily:"Microsoft YaHei",align:"left",padding:[0,0,0,15],formatter:"mean-3σ"},data:[{type:"max"}]}}]},this.option}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),s("div",{staticClass:"m-huabu",attrs:{id:"container"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.spcFeaturesArr.length>0,expression:"spcFeaturesArr.length>0"}],attrs:{id:"sonTitle"}},[t._v("自定义同时显示数据点的数量：\n      "),s("Input",{staticClass:"m-inputEntity",model:{value:t.showAtTheSameTimeSpotNums,callback:function(e){t.showAtTheSameTimeSpotNums=e},expression:"showAtTheSameTimeSpotNums"}}),t._v(" 个\n      "),s("Button",{staticClass:"m-updateNumBtn",attrs:{size:"small",type:"primary"},on:{click:t.readyForUpdateNumValue}},[t._v("点击更新")])],1),t._v(" "),t._l(t.spcFeaturesArr,function(e,a){return s("div",[s("hr",{staticStyle:{"margin-top":"20px","margin-bottom":"20px",height:"2px",border:"none","border-top":"2px ridge gray"}}),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"m-spcChart",attrs:{id:"chart_"+a}}),t._v(" "),s("div",[t._v("Ca: "+t._s(t.latestAllCa[a])+"      Cp:\n        "+t._s(t.latestAllCp[a])+"      Cpk:\n        "+t._s(t.latestAllCpk[a])+"      \n        "),s("span",[t._v("自定义 —— LSL: "),s("Input",{staticClass:"m-inputEntity",model:{value:t.user_all_lsls[a],callback:function(e){t.$set(t.user_all_lsls,a,e)},expression:"user_all_lsls[index]"}}),t._v("      USL: "),s("Input",{staticClass:"m-inputEntity",model:{value:t.user_all_usls[a],callback:function(e){t.$set(t.user_all_usls,a,e)},expression:"user_all_usls[index]"}})],1),s("Button",{staticClass:"m-updateUSLAndLSLBtn",attrs:{size:"small",type:"primary"},on:{click:function(e){t.sendBackAfterSomeParasChanged(a)}}},[t._v("\n          点击更新")])],1),t._v(" "),s("br")])})],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"titlelay"},[e("div",{staticClass:"titleinner",attrs:{id:"titleinner"}},[this._v("\n      　SPC实时数据状态图\n    ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tempHinterLayer",attrs:{id:"tempHinterLayer"}},[e("div",{staticClass:"tempHinterInner"},[this._v("\n      　（暂时没有收到数据发送）\n    ")])])}]};var m=s("VU/8")(o,u,!1,function(t){s("TfI2")},null,null).exports,h=s("BTaQ"),p=s.n(h),c=(s("+skl"),{render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{attrs:{id:"circleLoadingContainer"}},[e("div",{staticClass:"loadEffect"},[e("span"),this._v(" "),e("span"),this._v(" "),e("span"),this._v(" "),e("span"),this._v(" "),e("span"),this._v(" "),e("span"),this._v(" "),e("span"),this._v(" "),e("span")])])])}]});var d=s("VU/8")(null,c,!1,function(t){s("E4za")},"data-v-a2bd781a",null).exports,f={install:function(t){t.component("circleLoading",d)}};s("BO1k"),s("fZjL"),s("pFYg");var _={mixin:function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t},d:function(t){return document.getElementById(t)},tranFirstLetterUpperPresent:function(t){if(""==t)return"";var e=t.slice(0,1),s=t.slice(1);return e.toUpperCase()+s},getCurrentDateAndTime:function(){var t=new Date,e=t.getMonth()+1,s=t.getDate(),a=t.getHours(),i=t.getMinutes();return e>=1&&e<=9&&(e="0"+e),s>=0&&s<=9&&(s="0"+s),a>=0&&a<=9&&(a="0"+a),i>=0&&i<=9&&(i="0"+i),t.getFullYear()+"-"+e+"-"+s+" "+a+":"+i}},y=_;s("4bFZ");a.default.config.productionTip=!1,a.default.use(p.a),a.default.use(f),a.default.prototype.d=y.d,a.default.prototype.tranFirstLetterUpperPresent=y.tranFirstLetterUpperPresent,a.default.prototype.getCurrentDateAndTime=y.getCurrentDateAndTime,new a.default({el:"#app",components:{App:m},template:"<App/>"})},TfI2:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ff9545a26e29987f4249.js.map